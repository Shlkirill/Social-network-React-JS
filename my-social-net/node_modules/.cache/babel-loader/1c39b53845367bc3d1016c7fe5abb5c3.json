{"ast":null,"code":"import { apiFollowUser, apiGetFollowUser, apiGetStatus, apiSetProfile, apiUnfollowUser, apiUpdateStatus } from \"../api/api\";\nexport const addPostActionCreator = text => {\n  return {\n    type: \"ADD-POST\",\n    newText: text\n  };\n};\nexport const addLikeActionCreator = props => {\n  return {\n    type: \"ADD-LIKE\",\n    clickPost: props\n  };\n};\nexport const setUserProfileAC = userProfile => {\n  return {\n    type: \"SET_USER_PROFILE\",\n    userProfile\n  };\n};\nexport const setFollowedUserAC = followed => {\n  return {\n    type: \"SET_FOLLOWED_USER\",\n    followed\n  };\n};\nexport const followingInProgressAC = value => {\n  return {\n    type: 'FOLLOWING_IN_PROGRESS',\n    value\n  };\n};\nexport const setStatusAC = status => {\n  return {\n    type: 'SET_STATUS',\n    status\n  };\n};\nlet initialState = {\n  posts: [{\n    id: 1,\n    text: 'Hello! How are you?',\n    likes: 3,\n    likeClick: 0\n  }, {\n    id: 2,\n    text: 'My name is Kirill!',\n    likes: 8,\n    likeClick: 0\n  }, {\n    id: 3,\n    text: 'Good life',\n    likes: 5,\n    likeClick: 0\n  }],\n  profile: null,\n  followed: null,\n  followingInProgress: false,\n  status: \"\"\n};\n\nconst profileReducer = (state = initialState, action) => {\n  let stateCopy;\n\n  switch (action.type) {\n    case \"SET_USER_PROFILE\":\n      stateCopy = { ...state,\n        profile: action.userProfile\n      };\n      return stateCopy;\n\n    case \"ADD-POST\":\n      stateCopy = { ...state,\n        posts: [...state.posts]\n      };\n      let newId = stateCopy.posts.length + 1;\n      let newLikes = 0;\n      let newPost = {\n        id: newId,\n        text: action.newText,\n        likes: newLikes,\n        likeClick: 0\n      };\n      stateCopy.posts.push(newPost);\n      return stateCopy;\n\n    case \"ADD-LIKE\":\n      stateCopy = { ...state,\n        posts: [...state.posts]\n      };\n\n      for (let k of stateCopy.posts) {\n        if (k.text == action.clickPost.text) {\n          if (k.likeClick == 0) {\n            k.likes += 1;\n            k.likeClick = 1;\n          } else {\n            k.likes -= 1;\n            k.likeClick = 0;\n          }\n        }\n      }\n\n      return stateCopy;\n\n    case \"SET_FOLLOWED_USER\":\n      stateCopy = { ...state,\n        followed: action.followed\n      };\n      return stateCopy;\n\n    case 'FOLLOWING_IN_PROGRESS':\n      stateCopy = { ...state,\n        followingInProgress: action.value\n      };\n      return stateCopy;\n\n    case 'SET_STATUS':\n      stateCopy = { ...state,\n        status: action.status\n      };\n      return stateCopy;\n\n    default:\n      return state;\n  }\n};\n\nexport const setProfileTC = userId => {\n  return dispatch => {\n    apiSetProfile(userId).then(response => {\n      dispatch(setUserProfileAC(response));\n    });\n  };\n};\nexport const getFollowUserTC = userId => {\n  return dispatch => {\n    apiGetFollowUser(userId).then(responce => {\n      dispatch(setFollowedUserAC(responce));\n    });\n  };\n};\nexport const followUserTC = userId => {\n  return dispatch => {\n    dispatch(followingInProgressAC(true));\n    apiFollowUser(userId).then(() => {\n      dispatch(setFollowedUserAC(true));\n      dispatch(followingInProgressAC(false));\n    });\n  };\n};\nexport const unFollowUserTC = userId => {\n  return dispatch => {\n    dispatch(followingInProgressAC(true));\n    apiUnfollowUser(userId).then(() => {\n      dispatch(setFollowedUserAC(false));\n      dispatch(followingInProgressAC(false));\n    });\n  };\n};\nexport const getUserStatusTC = userId => {\n  return dispatch => {\n    apiGetStatus(userId).then(responce => {\n      dispatch(setStatusAC(responce.data));\n    });\n  };\n};\nexport const getUpdateSatusTC = status => {\n  return dispatch => {\n    apiGetStatus(userId).then(responce => {\n      apiUpdateStatus(status).then(() => {});\n    });\n  };\n};\nexport default profileReducer;","map":{"version":3,"sources":["C:/Users/Tor/Desktop/Web/4-React-JS/my-social-net/src/redux/profileReducer.js"],"names":["apiFollowUser","apiGetFollowUser","apiGetStatus","apiSetProfile","apiUnfollowUser","apiUpdateStatus","addPostActionCreator","text","type","newText","addLikeActionCreator","props","clickPost","setUserProfileAC","userProfile","setFollowedUserAC","followed","followingInProgressAC","value","setStatusAC","status","initialState","posts","id","likes","likeClick","profile","followingInProgress","profileReducer","state","action","stateCopy","newId","length","newLikes","newPost","push","k","setProfileTC","userId","dispatch","then","response","getFollowUserTC","responce","followUserTC","unFollowUserTC","getUserStatusTC","data","getUpdateSatusTC"],"mappings":"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","sourcesContent":["import { apiFollowUser, apiGetFollowUser, apiGetStatus, apiSetProfile, apiUnfollowUser, apiUpdateStatus } from \"../api/api\"\r\n\r\nexport const addPostActionCreator = (text) => {\r\n  return {\r\n    type: \"ADD-POST\",\r\n    newText: text,\r\n  }\r\n}\r\n\r\nexport const addLikeActionCreator = (props) => {\r\n  return {\r\n    type: \"ADD-LIKE\",\r\n    clickPost: props\r\n  }\r\n}\r\nexport const setUserProfileAC = (userProfile) => {\r\n  return {\r\n    type: \"SET_USER_PROFILE\",\r\n    userProfile\r\n  }\r\n}\r\nexport const setFollowedUserAC = (followed) => {\r\n  return {\r\n    type: \"SET_FOLLOWED_USER\",\r\n    followed\r\n  }\r\n}\r\nexport const followingInProgressAC = (value) => {\r\n  return {\r\n    type: 'FOLLOWING_IN_PROGRESS',\r\n    value,\r\n  }\r\n}\r\nexport const setStatusAC = (status) => {\r\n  return {\r\n    type: 'SET_STATUS',\r\n    status,\r\n  }\r\n}\r\n\r\nlet initialState = {\r\n  posts: [\r\n    { id: 1, text: 'Hello! How are you?', likes: 3, likeClick: 0 },\r\n    { id: 2, text: 'My name is Kirill!', likes: 8, likeClick: 0 },\r\n    { id: 3, text: 'Good life', likes: 5, likeClick: 0 }\r\n  ],\r\n  profile: null,\r\n  followed: null,\r\n  followingInProgress: false,\r\n  status: \"\",\r\n\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n  let stateCopy;\r\n\r\n  switch (action.type) {\r\n    case \"SET_USER_PROFILE\":\r\n      stateCopy = {\r\n        ...state,\r\n        profile: action.userProfile,\r\n      };\r\n      return stateCopy;\r\n    case \"ADD-POST\":\r\n      stateCopy = {\r\n        ...state,\r\n        posts: [...state.posts],\r\n      };\r\n      let newId = stateCopy.posts.length + 1;\r\n      let newLikes = 0;\r\n      let newPost = {\r\n        id: newId,\r\n        text: action.newText,\r\n        likes: newLikes,\r\n        likeClick: 0\r\n      };\r\n      stateCopy.posts.push(newPost);\r\n      return stateCopy;\r\n    case \"ADD-LIKE\":\r\n      stateCopy = {\r\n        ...state,\r\n        posts: [...state.posts],\r\n      };\r\n      for (let k of stateCopy.posts) {\r\n        if (k.text == action.clickPost.text) {\r\n          if (k.likeClick == 0) {\r\n            k.likes += 1;\r\n            k.likeClick = 1;\r\n          } else {\r\n            k.likes -= 1;\r\n            k.likeClick = 0;\r\n          }\r\n        }\r\n      }\r\n      return stateCopy;\r\n    case \"SET_FOLLOWED_USER\":\r\n      stateCopy = {\r\n        ...state,\r\n        followed: action.followed,\r\n      };\r\n      return stateCopy;\r\n    case 'FOLLOWING_IN_PROGRESS':\r\n      stateCopy = {\r\n        ...state,\r\n        followingInProgress: action.value\r\n      }\r\n      return stateCopy;\r\n    case 'SET_STATUS':\r\n      stateCopy = {\r\n        ...state,\r\n        status: action.status\r\n      }\r\n      return stateCopy;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const setProfileTC = (userId) => {\r\n  return (dispatch) => {\r\n    apiSetProfile(userId).then((response) => {\r\n      dispatch(setUserProfileAC(response))\r\n    });\r\n  }\r\n}\r\n\r\nexport const getFollowUserTC = (userId) => {\r\n  return (dispatch) => {\r\n    apiGetFollowUser(userId).then((responce) => {\r\n      dispatch(setFollowedUserAC(responce));\r\n    })\r\n  }\r\n}\r\n\r\nexport const followUserTC = (userId) => {\r\n  return (dispatch) => {\r\n    dispatch(followingInProgressAC(true));\r\n    apiFollowUser(userId).then(() => {\r\n      dispatch(setFollowedUserAC(true));\r\n      dispatch(followingInProgressAC(false));\r\n    });\r\n  }\r\n}\r\n\r\nexport const unFollowUserTC = (userId) => {\r\n  return (dispatch) => {\r\n    dispatch(followingInProgressAC(true));\r\n    apiUnfollowUser(userId).then(() => {\r\n      dispatch(setFollowedUserAC(false));\r\n      dispatch(followingInProgressAC(false));\r\n    });\r\n  }\r\n}\r\n\r\nexport const getUserStatusTC = (userId) => {\r\n  return (dispatch) => {\r\n    apiGetStatus(userId).then((responce) => {\r\n      dispatch(setStatusAC(responce.data))\r\n    })\r\n  }\r\n}\r\n\r\nexport const getUpdateSatusTC = (status) => {\r\n  return (dispatch) => {\r\n    apiGetStatus(userId).then((responce) => {\r\n      apiUpdateStatus(status).then(()=> {\r\n\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport default profileReducer;"]},"metadata":{},"sourceType":"module"}